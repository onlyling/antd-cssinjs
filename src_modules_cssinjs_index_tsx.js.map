{"version":3,"file":"src_modules_cssinjs_index_tsx.js","sources":["src/modules/cssinjs/button.tsx","src/modules/cssinjs/index.tsx","src/modules/cssinjs/theme.tsx"],"sourcesContent":["import { useStyleRegister } from '@ant-design/cssinjs'\nimport type { CSSInterpolation, CSSObject } from '@ant-design/cssinjs'\nimport React, { memo } from 'react'\n\nimport type { DerivativeToken } from './theme'\nimport { useToken } from './theme'\n\n// 通用框架\nconst genSharedButtonStyle = (\n  prefixCls: string,\n  token: DerivativeToken,\n): CSSInterpolation => ({\n  [`.${prefixCls}`]: {\n    borderColor: token.borderColor,\n    borderWidth: token.borderWidth,\n    borderRadius: token.borderRadius,\n\n    cursor: 'pointer',\n\n    transition: 'background 0.3s',\n  },\n})\n\n// 实心底色样式\nconst genSolidButtonStyle = (\n  prefixCls: string,\n  token: DerivativeToken,\n  postFn: () => CSSObject,\n): CSSInterpolation => [\n  genSharedButtonStyle(prefixCls, token),\n  {\n    [`.${prefixCls}`]: {\n      ...postFn(),\n    },\n  },\n]\n\nconst genDefaultButtonStyle = (\n  prefixCls: string,\n  token: DerivativeToken,\n): CSSInterpolation =>\n  genSolidButtonStyle(prefixCls, token, () => ({\n    backgroundColor: token.componentBackgroundColor,\n    color: token.textColor,\n\n    '&:hover': {\n      borderColor: token.primaryColor,\n      color: token.primaryColor,\n    },\n  }))\n\nconst genPrimaryButtonStyle = (\n  prefixCls: string,\n  token: DerivativeToken,\n): CSSInterpolation =>\n  genSolidButtonStyle(prefixCls, token, () => ({\n    backgroundColor: token.primaryColor,\n    border: `${token.borderWidth}px solid ${token.primaryColor}`,\n    color: token.reverseTextColor,\n\n    '&:hover': {\n      backgroundColor: token.primaryColorDisabled,\n    },\n  }))\n\nconst genDashedButtonStyle = (\n  prefixCls: string,\n  token: DerivativeToken,\n): CSSInterpolation => [\n  genSharedButtonStyle(prefixCls, token),\n  {\n    [`.${prefixCls}`]: {\n      backgroundColor: 'transparent',\n      color: token.primaryColor,\n      border: `${token.borderWidth}px solid ${token.primaryColor}`,\n      borderStyle: 'dashed',\n\n      '&:hover': {\n        borderColor: token.primaryColor,\n        color: token.primaryColor,\n      },\n    },\n  },\n]\n\nconst prefixCls = 'demo-btn'\n\nconst CssInJsButton = ({\n  className,\n  type,\n  ...restProps\n}: React.PropsWithChildren<\n  Omit<React.ButtonHTMLAttributes<HTMLButtonElement>, 'type'> & {\n    type?: 'default' | 'primary' | 'dashed'\n  }\n>) => {\n  const [theme, token, hashId] = useToken()\n  const defaultCls = `${prefixCls}-default`\n  const primaryCls = `${prefixCls}-primary`\n  const dashedCls = `${prefixCls}-dashed`\n\n  const wrapSSR = useStyleRegister(\n    { theme, token, hashId, path: [prefixCls] },\n    () => [\n      genDefaultButtonStyle(defaultCls, token),\n      genPrimaryButtonStyle(primaryCls, token),\n      genDashedButtonStyle(dashedCls, token),\n    ],\n  )\n\n  const typeCls =\n    (\n      {\n        primary: primaryCls,\n        dashed: dashedCls,\n      } as any\n    )[type as any] || defaultCls\n\n  return wrapSSR(\n    <button\n      {...restProps}\n      className={[prefixCls, typeCls, hashId, className]\n        .filter(Boolean)\n        .join(' ')}\n    />,\n  )\n}\n\nexport default memo(CssInJsButton)\n","import { memo, useState } from 'react'\n\nimport CssInJsButton from './button'\nimport type { DesignToken } from './theme'\nimport { DesignTokenProvider, ThemeProvider } from './theme'\n\nconst TOKEN_1: Partial<DesignToken> = {\n  primaryColor: '#f30',\n}\n\nconst CssInJsChildren = () => {\n  return (\n    <>\n      <div>ddd</div>\n      <CssInJsButton>default</CssInJsButton>\n      <CssInJsButton type=\"dashed\">dashed</CssInJsButton>\n      <CssInJsButton type=\"primary\">primary</CssInJsButton>\n    </>\n  )\n}\n\nconst CssInJs = () => {\n  const [token, setToken] = useState<Partial<DesignToken> | undefined>()\n\n  return (\n    <>\n      <button\n        onClick={() => {\n          setToken(TOKEN_1)\n        }}>\n        token 1\n      </button>\n      <button\n        onClick={() => {\n          setToken(undefined)\n        }}>\n        token reset\n      </button>\n      <DesignTokenProvider hashed token={token}>\n        <ThemeProvider>\n          <CssInJsChildren />\n        </ThemeProvider>\n      </DesignTokenProvider>\n    </>\n  )\n}\n\nexport default memo(CssInJs)\n","import type { CSSObject, Theme } from '@ant-design/cssinjs'\nimport { createTheme, useCacheToken } from '@ant-design/cssinjs'\nimport React, { useMemo, useContext, createContext } from 'react'\n\nexport interface DesignToken {\n  primaryColor: string\n  textColor: string\n  reverseTextColor: string\n\n  componentBackgroundColor: string\n\n  borderRadius: number\n  borderColor: string\n  borderWidth: number\n}\n\nexport interface DerivativeToken extends DesignToken {\n  primaryColorDisabled: string\n}\n\nexport type GetStyle = (prefixCls: string, token: DerivativeToken) => CSSObject\n\nconst defaultDesignToken: DesignToken = {\n  primaryColor: '#1890ff',\n  textColor: '#333333',\n  reverseTextColor: '#FFFFFF',\n\n  componentBackgroundColor: '#FFFFFF',\n\n  borderRadius: 2,\n  borderColor: 'black',\n  borderWidth: 1,\n}\n\nexport const derivative = (designToken: DesignToken): DerivativeToken => {\n  return {\n    ...designToken,\n    primaryColorDisabled: '#098',\n  }\n}\n\nexport const ThemeContext = createContext(createTheme(derivative))\n\nexport const DesignTokenContext = createContext<{\n  token?: Partial<DesignToken>\n  hashed?: string | boolean\n}>({\n  token: defaultDesignToken,\n})\n\nexport const ThemeProvider = ({\n  theme,\n  children,\n}: React.PropsWithChildren<{\n  theme?: Theme<any, any>\n}>) => {\n  const value = useMemo(() => theme ?? createTheme(derivative), [theme])\n\n  return <ThemeContext.Provider value={value}>{children}</ThemeContext.Provider>\n}\n\nexport const DesignTokenProvider = ({\n  token,\n  hashed,\n  children,\n}: React.PropsWithChildren<{\n  token?: Partial<DesignToken>\n  hashed?: string | boolean\n}>) => {\n  const value = useMemo(\n    () => ({\n      token: token ?? defaultDesignToken,\n      hashed,\n    }),\n    [hashed, token],\n  )\n\n  return (\n    <DesignTokenContext.Provider value={value}>\n      {children}\n    </DesignTokenContext.Provider>\n  )\n}\n\nexport function useToken(): [Theme<any, any>, DerivativeToken, string] {\n  const { token: rootDesignToken = {}, hashed } = useContext(DesignTokenContext)\n  const theme = useContext(ThemeContext)\n\n  const [token, hashId] = useCacheToken<DerivativeToken, DesignToken>(\n    theme,\n    [defaultDesignToken, rootDesignToken],\n    {\n      salt: typeof hashed === 'string' ? hashed : '',\n    },\n  )\n  return [theme, token, hashed ? hashId : '']\n}\n"],"names":["genSharedButtonStyle","prefixCls","token","borderColor","borderWidth","borderRadius","cursor","transition","genSolidButtonStyle","postFn","genDefaultButtonStyle","backgroundColor","componentBackgroundColor","color","textColor","primaryColor","genPrimaryButtonStyle","border","reverseTextColor","primaryColorDisabled","genDashedButtonStyle","borderStyle","CssInJsButton","className","type","restProps","theme","hashId","useToken","defaultCls","primaryCls","dashedCls","wrapSSR","useStyleRegister","path","primary","dashed","filter","Boolean","join","memo","TOKEN_1","CssInJsChildren","CssInJs","setToken","useState","onClick","undefined","DesignTokenProvider","hashed","ThemeProvider","derivative","ThemeContext","DesignTokenContext","defaultDesignToken","designToken","createContext","createTheme","children","value","useMemo","Provider","rootDesignToken","useContext","useCacheToken","salt"],"mappings":"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"}